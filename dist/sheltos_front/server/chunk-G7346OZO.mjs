import './polyfills.server.mjs';
import{$ as c,C as re,D as oe,Db as He,Eb as $e,Ed as Ze,F as Ae,I as k,L as De,M as w,N as Te,O as we,Oa as Ve,Q as Ne,S as Re,Ta as Ue,Ua as ae,X as d,Y as se,Z as p,_ as N,_a as _,aa as R,b as q,ba as B,c as I,d as A,db as ce,dd as Ke,e as Q,ea as Ce,eb as Ge,fb as Le,g as J,i as Ie,j as g,ja as ie,jc as ze,k as ee,ka as xe,kc as Xe,l as te,la as m,lc as M,m as E,ma as Fe,n as D,na as Pe,nc as S,oa as je,pa as ke,q as ne,sa as Be,tc as Ye,u as j,y as T}from"./chunk-K5K25C2Y.mjs";import{a as l,b as Oe}from"./chunk-X2SEQXRR.mjs";var Ot=["*"],b=class{},qe=(()=>{let o=class o extends b{constructor(t){super(),this.http=t}getSvg(t){return this.http.get(t,{responseType:"text"})}};o.\u0275fac=function(r){return new(r||o)(N(Ke))},o.\u0275prov=d({token:o,factory:o.\u0275fac});let e=o;return e})(),It=new p("SERVER_URL"),V=(()=>{let o=class o{constructor(){this.loader=c(b),this.serverUrl=c(It,{optional:!0}),this.document=c(xe),this.iconsByUrl=new Map,this.iconsLoadingByUrl=new Map}addSvg(t,r){if(!this.iconsByUrl.has(t)){let s=this.document.createElement("DIV");s.innerHTML=r;let i=s.querySelector("svg");this.iconsByUrl.set(t,i)}}loadSvg(t,r=t){if(this.serverUrl&&t.match(/^(http(s)?):/)===null&&(t=this.serverUrl+t,r=t),this.iconsByUrl.has(r))return g(this.iconsByUrl.get(r));if(this.iconsLoadingByUrl.has(r))return this.iconsLoadingByUrl.get(r);let s=this.loader.getSvg(t).pipe(E(i=>{let a=this.document.createElement("DIV");return a.innerHTML=i,a.querySelector("svg")}),Re(i=>this.iconsByUrl.set(r,i)),T(i=>(console.error(i),ee(i))),k(()=>this.iconsLoadingByUrl.delete(r)),De());return this.iconsLoadingByUrl.set(r,s),s}getSvgByName(t){return this.iconsByUrl.has(t)?g(this.iconsByUrl.get(t)):this.iconsLoadingByUrl.has(t)?this.iconsLoadingByUrl.get(t):ee(`No svg with name '${t}' has been loaded`)}unloadSvg(t){this.iconsByUrl.has(t)&&this.iconsByUrl.delete(t)}};o.\u0275fac=function(r){return new(r||o)},o.\u0275prov=d({token:o,factory:o.\u0275fac});let e=o;return e})();function At(e){return e||new V}var Qe={provide:V,deps:[[new je,new ke,V]],useFactory:At},U=class{constructor(){this.loaded=!1}},In=(()=>{let o=class o{constructor(){this.element=c(Be),this.differs=c(Ye),this.renderer=c(Ve),this.iconReg=c(V),this.src=S(),this.name=S(),this.stretch=S(!1),this.applyClass=S(!1),this.svgClass=S(),this.klass=S(void 0,{alias:"class"}),this.viewBox=S(),this.svgAriaLabel=S(),this.onSVGLoaded=S(),this.svg=Pe(0),this.svgStyle=S(),this.helper=new U,M(()=>{(this.src()||this.name())&&(this.destroy(),this.init(this.src(),this.name()))},{allowSignalWrites:!0}),M(()=>{let s=this.viewBox();this.svg()&&this.updateViewBox(s)}),M(()=>{let s=this.svgStyle()||{};this.svg()&&this.applyChanges(this.helper.differ.diff(s))}),M(()=>{let s=this.svg();this.applyClass()?this.setClass(this.elemSvg,null,this.klass()):this.setClass(this.elemSvg,this.klass(),null)});let t;M(()=>{let s=this.svg();this.setClass(this.elemSvg,t,this.svgClass()),t=this.svgClass()});let r;M(()=>{let s=this.svg(),i=this.element.nativeElement;this.setClass(i,r,this.klass()),this.setClass(this.elemSvg,r,this.applyClass()?this.klass():null),r=this.klass()}),M(()=>{let s=this.svg();this.doAria(this.svgAriaLabel())}),M(()=>{let s=this.svg();this.stylize(this.stretch())})}ngOnDestroy(){this.destroy()}get elemSvg(){return this.element.nativeElement.firstChild}init(t,r){if(t&&r){let s=this.iconReg.loadSvg(t,r);s&&(this.helper.icnSub=s.subscribe(i=>this.initSvg(i)))}else if(r){let s=this.iconReg.getSvgByName(r);s&&(this.helper.icnSub=s.subscribe(i=>this.initSvg(i)))}else if(t){let s=this.iconReg.loadSvg(t);s&&(this.helper.icnSub=s.subscribe(i=>this.initSvg(i)))}else this.element.nativeElement.innerHTML="",this.svg.set(0)}initSvg(t){!this.helper.loaded&&t&&this.setSvg(t)}destroy(){this.helper.icnSub?.unsubscribe(),this.helper=new U,this.helper.differ=this.differs.find({}).create()}setSvg(t){if(!this.helper.loaded&&t){this.helper.svg=t;let r=t.cloneNode(!0),s=this.element.nativeElement,i=this?.onSVGLoaded();i&&(r=i(r,s)),s.innerHTML="",this.renderer.appendChild(s,r),this.helper.loaded=!0,this.copyNgContentAttribute(s,r),this.svg.update(a=>a+1)}}updateViewBox(t){if(t){let r=this.elemSvg;if(t==="auto"){let s=r.getAttribute("width"),i=r.getAttribute("height");if(i&&s){let a=`0 0 ${s} ${i}`;this.renderer.setAttribute(r,"viewBox",a),this.renderer.removeAttribute(r,"width"),this.renderer.removeAttribute(r,"height")}}else t!==""&&(this.renderer.setAttribute(r,"viewBox",t),this.renderer.removeAttribute(r,"width"),this.renderer.removeAttribute(r,"height"))}}copyNgContentAttribute(t,r){let s=t.attributes,i=s.length;for(let a=0;a<i;a+=1){let u=s.item(a);if(u&&u.name.startsWith("_ngcontent")){this.setNgContentAttribute(r,u.name);break}}}setNgContentAttribute(t,r){this.renderer.setAttribute(t,r,"");let s=t.childNodes.length;for(let i=0;i<s;i+=1){let a=t.childNodes[i];a instanceof Element&&this.setNgContentAttribute(a,r)}}stylize(t){if(this.helper.svg){let r=this.element.nativeElement.firstChild;t===!0?this.renderer.setAttribute(r,"preserveAspectRatio","none"):t===!1&&this.renderer.removeAttribute(r,"preserveAspectRatio")}}applyChanges(t){t&&(t.forEachRemovedItem(r=>this.setStyle(r.key,null)),t.forEachAddedItem(r=>this.setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this.setStyle(r.key,r.currentValue)))}setStyle(t,r){let[s,i]=t.split(".");r=r!==null&&i?`${r}${i}`:r;let a=this.elemSvg;r!==null?this.renderer.setStyle(a,s,r):this.renderer.removeStyle(a,s)}setClass(t,r,s){if(t){if(r){let i=(Array.isArray(r)?r:r.split(" ")).filter(a=>a);for(let a of i)this.renderer.removeClass(t,a)}if(s){let i=(Array.isArray(s)?s:s.split(" ")).filter(a=>a);for(let a of i)this.renderer.addClass(t,a)}}}doAria(t){if(t!==void 0){let r=this.element.nativeElement.firstChild;r&&!r.hasAttribute("aria-label")&&(t===""?(this.renderer.setAttribute(r,"aria-hidden","true"),this.renderer.removeAttribute(r,"aria-label")):(this.renderer.removeAttribute(r,"aria-hidden"),this.renderer.setAttribute(r,"aria-label",t)))}}};o.\u0275fac=function(r){return new(r||o)},o.\u0275cmp=Ue({type:o,selectors:[["svg-icon"]],inputs:{src:[1,"src"],name:[1,"name"],stretch:[1,"stretch"],applyClass:[1,"applyClass"],svgClass:[1,"svgClass"],klass:[1,"class","klass"],viewBox:[1,"viewBox"],svgAriaLabel:[1,"svgAriaLabel"],onSVGLoaded:[1,"onSVGLoaded"],svgStyle:[1,"svgStyle"]},ngContentSelectors:Ot,decls:1,vars:0,template:function(r,s){r&1&&(He(),$e(0))},encapsulation:2,changeDetection:0});let e=o;return e})();function An(e={}){return R([Qe,e.loader||{provide:b,useClass:qe}])}var Dn=(()=>{let o=class o{static forRoot(t={}){return{ngModule:o,providers:[Qe,t.loader||{provide:b,useClass:qe}]}}};o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=ae({type:o}),o.\u0275inj=se({});let e=o;return e})();var v="NGXS_META",fe="NGXS_OPTIONS_META",ue="NGXS_SELECTOR_META",Dt=Object.prototype.hasOwnProperty,L=(e,o)=>Dt.call(e,o),Je=Object.defineProperty;function pe(e){if(!L(e,v)){let o={name:null,actions:{},defaults:{},path:null,makeRootSelector(n){return n.getStateGetter(o.name)},children:[]};Je(e,v,{value:o})}return C(e)}function C(e){return e[v]}function he(e){return L(e,ue)||Je(e,ue,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),ge(e)}function ge(e){return e[ue]}function Tt(e,o,n){if(o===null||n===null||o.length!==n.length)return!1;let t=o.length;for(let r=0;r<t;r++)if(!e(o[r],n[r]))return!1;return!0}function H(e,o=Object.is){let n=null,t=null;function r(){return Tt(o,n,arguments)||(t=e.apply(null,arguments)),n=arguments,t}return r.reset=function(){n=null,t=null},r}var le=class{_name;constructor(o){this._name=o;let n=he(this);n.makeRootSelector=t=>t.getStateGetter(this._name)}getName(){return this._name}toString(){return`StateToken[${this._name}]`}},wt=(()=>{class e{static _value={};static set(n){this._value=n}static pop(){let n=this._value;return this._value={},n}}return e})(),Se=new p("",{providedIn:"root",factory:()=>wt.pop()}),ye=(()=>{class e extends Q{constructor(){super(!1),c(m).onDestroy(()=>this.complete())}bootstrap(){this.next(!0)}static \u0275fac=function(t){return new(t||e)};static \u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function et(e){let o=[],n=!1;return function(...r){if(n){o.unshift(r);return}for(n=!0,e(...r);o.length>0;){let s=o.pop();s&&e(...s)}n=!1}}var G=class extends A{_orderedNext=et(o=>super.next(o));next(o){this._orderedNext(o)}},de=class extends Q{_orderedNext=et(o=>super.next(o));_currentValue;constructor(o){super(o),this._currentValue=o}getValue(){return this._currentValue}next(o){this._currentValue=o,this._orderedNext(o)}};function ve(e){return o=>new I(n=>o.subscribe({next(t){e(()=>n.next(t))},error(t){e(()=>n.error(t))},complete(){e(()=>n.complete())}}))}var $=(()=>{class e extends de{state=Ze(this.pipe(ve(ze)),{manualCleanup:!0,requireSync:!0});constructor(){super({}),c(m).onDestroy(()=>this.complete())}static \u0275fac=function(t){return new(t||e)};static \u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),tt=(()=>{class e{_actionTypeToHandlersMap=new Map;constructor(){c(m).onDestroy(()=>this._actionTypeToHandlersMap.clear())}get(n){return this._actionTypeToHandlersMap.get(n)}register(n,t){let r=this._actionTypeToHandlersMap.get(n)??new Set;return r.add(t),this._actionTypeToHandlersMap.set(n,r),()=>{this._actionTypeToHandlersMap.get(n).delete(t)}}static \u0275fac=function(t){return new(t||e)};static \u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var nt=(()=>{class e{static type="@@INIT"}return e})(),rt=(()=>{class e{addedStates;static type="@@UPDATE_STATE";constructor(n){this.addedStates=n}}return e})(),z=new p("");function ot(e){return!!e.prototype.handle}function O(e){return e.constructor?.type||e.type}function Pn(e){let o=O(e);return function(n){return o===O(n)}}var me=(e,o,n)=>{e=l({},e);let t=o.split("."),r=t.length-1;return t.reduce((s,i,a)=>(a===r?s[i]=n:s[i]=Array.isArray(s[i])?s[i].slice():l({},s[i]),s?.[i]),e),e},X=(e,o)=>o.split(".").reduce((n,t)=>n?.[t],e);var Bn=Array.isArray,Nt=e=>typeof e=="function",st=Nt;var pt=(()=>{class e{plugins=[];_parentManager=c(e,{optional:!0,skipSelf:!0});_pluginHandlers=c(z,{optional:!0});constructor(){this.registerHandlers()}get _rootPlugins(){return this._parentManager?.plugins||this.plugins}registerHandlers(){let n=this.getPluginHandlers();this._rootPlugins.push(...n)}getPluginHandlers(){return(this._pluginHandlers||[]).map(t=>t.handle?t.handle.bind(t):t)}static \u0275fac=function(t){return new(t||e)};static \u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Y(e){return ve(o=>e.leave(o))}var Ee=new WeakMap,it=!1;function Rt(){if(it)return;let e=q.onUnhandledError;q.onUnhandledError=function(o){let n=Ee.get(o);if(n)n();else if(e)e.call(this,o);else throw o},it=!0}function Ct(e){let o=Ee.get(e);return o?(o(),!0):!1}function xt(e,o){if(e&&typeof e=="object"){let n=!1;Ee.set(e,()=>{n||(n=!0,o())})}return e}function Ft(e){return o=>{let n=o.subscribe({error:t=>{e.runOutsideAngular(()=>{queueMicrotask(()=>{n&&Ct(t)})})}});return new I(t=>(n?.unsubscribe(),n=null,o.subscribe(t)))}}var ht=(()=>{class e extends A{constructor(){super(),c(m).onDestroy(()=>this.complete())}static \u0275fac=function(t){return new(t||e)};static \u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),gt=(()=>{class e{_ngZone=c(_);enter(n){return this._runInsideAngular(n)}leave(n){return this._runInsideAngular(n)}_runInsideAngular(n){return _.isInAngularZone()?n():this._ngZone.run(n)}_runOutsideAngular(n){return _.isInAngularZone()?this._ngZone.runOutsideAngular(n):n()}static \u0275fac=function(t){return new(t||e)};static \u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),y=(function(e){return e.Dispatched="DISPATCHED",e.Successful="SUCCESSFUL",e.Canceled="CANCELED",e.Errored="ERRORED",e})(y||{}),_e=(()=>{class e extends G{dispatched$=new A;constructor(){super(),this.subscribe(t=>{t.status===y.Dispatched&&this.dispatched$.next(t)}),c(m).onDestroy(()=>{this.complete(),this.dispatched$.complete()})}static \u0275fac=function(t){return new(t||e)};static \u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Pt=(()=>{class e{_ngZone=c(_);_actions=c(_e);_actionResults=c(ht);_pluginManager=c(pt);_stateStream=c($);_ngxsExecutionStrategy=c(gt);_injector=c(ie);dispatch(n){return this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(n)).pipe(Ft(this._ngZone),Y(this._ngxsExecutionStrategy))}dispatchByEvents(n){return Array.isArray(n)?n.length===0?g(void 0):ne(n.map(t=>this.dispatchSingle(t))).pipe(E(()=>{})):this.dispatchSingle(n)}dispatchSingle(n){let t=this._stateStream.getValue(),r=this._pluginManager.plugins;return St(this._injector,[...r,(s,i)=>{s!==t&&this._stateStream.next(s);let a=this.getActionResultStream(i);return a.subscribe(u=>this._actions.next(u)),this._actions.next({action:i,status:y.Dispatched}),this.createDispatchObservable(a)}])(t,n).pipe(w())}getActionResultStream(n){return this._actionResults.pipe(j(t=>t.action===n&&t.status!==y.Dispatched),oe(1),w())}createDispatchObservable(n){return n.pipe(D(t=>{switch(t.status){case y.Successful:return g(this._stateStream.getValue());case y.Errored:throw t.error;default:return J}}),w())}static \u0275fac=function(t){return new(t||e)};static \u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),St=(e,o)=>(...n)=>{let t=o.shift();return Ce(e,()=>t(...n,(...r)=>St(e,o)(...r)))},yt=new p(""),jt=new p(""),vt=new p(""),x=(()=>{class e{developmentMode;compatibility={strictContentSecurityPolicy:!1};selectorOptions={injectContainerState:!1,suppressErrors:!1};static \u0275fac=function(t){return new(t||e)};static \u0275prov=d({token:e,factory:()=>(()=>{let n=new e,t=c(vt);return Oe(l(l({},n),t),{selectorOptions:l(l({},n.selectorOptions),t.selectorOptions)})})(),providedIn:"root"})}return e})(),Me=class{previousValue;currentValue;firstChange;constructor(o,n,t){this.previousValue=o,this.currentValue=n,this.firstChange=t}};var F=(()=>{class e{_stateStream=c($);_dispatcher=c(Pt);_config=c(x);getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:t=>this._stateStream.next(t),dispatch:t=>this._dispatcher.dispatch(t)}}setStateToTheCurrentWithNew(n){let t=this.getRootStateOperations(),r=t.getState();t.setState(l(l({},r),n.defaults))}static \u0275fac=function(t){return new(t||e)};static \u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function kt(e,o,n){return t=>{let{argumentSelectorFunctions:r,selectorOptions:s}=Vt(t,e,o),{suppressErrors:i}=s;return function(u){let f=r.map(h=>h(u));try{return n(...f)}catch(h){if(i&&h instanceof TypeError)return;throw h}}}}function Bt(e,o){let n=o?.containerClass,r=H(function(){let i=e.apply(n,arguments);return typeof i=="function"?H.apply(null,[i]):i});return Object.setPrototypeOf(r,e),r}function Vt(e,o,n=[]){let t=o.getSelectorOptions(),r=e.getSelectorOptions(t),i=Ut(n,r,o.containerClass).map(a=>mt(a)(e));return{selectorOptions:r,argumentSelectorFunctions:i}}function Ut(e=[],o,n){let t=[],r=o.injectContainerState||e.length===0;return n&&r&&C(n)&&t.push(n),t.push(...e),t}function mt(e){return(ge(e)||C(e))?.makeRootSelector||(()=>e)}function Gt(e){return o=>{for(let n=0;n<e.length;n++){if(!o)return;o=o[e[n]]}return o}}function Lt(e){let o=e,n="store."+o[0],t=0,r=o.length,s=n;for(;++t<r;)s=s+" && "+(n=n+"."+o[t]);return new Function("store","return "+s+";")}var Ht=new p("",{providedIn:"root",factory:()=>c(x).compatibility?.strictContentSecurityPolicy?Gt:Lt});function $t(e){let o=n=>e.find(r=>r===n)[v].name;return e.reduce((n,t)=>{let r=t[v];return n[r.name]=(r.children||[]).map(o),n},{})}function zt(e){return e.reduce((o,n)=>{let t=n[v];return o[t.name]=n,o},{})}function Xt(e,o={}){let n=(t,r)=>{for(let s in t)if(t[s]?.includes(r)){let i=n(t,s);return i?`${i}.${s}`:s}return null};for(let t in e){let r=n(e,t);o[t]=r?`${r}.${t}`:t}return o}function Yt(e){let o=[],n={},t=(r,s=[])=>{n[r]=!0,s.push(r);for(let i of e[r])n[i]||t(i,s.slice());o.includes(r)||o.push(r)};for(let r in e)t(r);return o.reverse()}var Kt=(()=>{class e{_ngZone=c(_);_errorHandler=c(Fe);handleError(n,t){this._ngZone.runOutsideAngular(()=>this._errorHandler.handleError(n))}static \u0275fac=function(t){return new(t||e)};static \u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Zt(...e){return Wt(e,[y.Dispatched])}function Wt(e,o,n=Qt){let t=Jt(e),r=o&&en(o);return function(s){return s.pipe(qt(t,r),n())}}function qt(e,o){return j(n=>{let t=O(n.action),r=e[t],s=o?o[n.status]:!0;return r&&s})}function Qt(){return E(e=>e.action)}function Jt(e){return e.reduce((o,n)=>(o[O(n)]=!0,o),{})}function en(e){return e.reduce((o,n)=>(o[n]=!0,o),{})}function tn(e){return o=>{let n=l({},o);for(let t in e)n[t]=e[t];return n}}var Mt=(()=>{class e{_internalStateOperations=c(F);createStateContext(n){let t=this._internalStateOperations.getRootStateOperations();return{getState(){let r=t.getState();return _t(r,n)},patchState(r){let s=t.getState(),i=tn(r);at(t,s,i,n)},setState(r){let s=t.getState();st(r)?at(t,s,r,n):Et(t,s,r,n)},dispatch(r){return t.dispatch(r)}}}static \u0275fac=function(t){return new(t||e)};static \u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Et(e,o,n,t){let r=me(o,t,n);return e.setState(r),r}function at(e,o,n,t){let r=_t(o,t),s=n(r);return Et(e,o,s,t)}function _t(e,o){return X(e,o)}var nn=(()=>{class e{_actions=c(_e);_stateContextFactory=c(Mt);createActionHandler(n,t,r){let{dispatched$:s}=this._actions;return i=>{let a=this._stateContextFactory.createStateContext(n),u=t(a,i);if(ce(u)&&(u=Ie(u)),te(u)){if(u=u.pipe(D(f=>ce(f)||te(f)?f:g(f)),re(void 0)),r.cancelUncompleted){let f=s.pipe(Zt(i));u=u.pipe(Ne(f))}u=u.pipe(k(()=>{if(0)var f;else a.setState=ct,a.patchState=ct}))}else u=g(void 0);return u}}static \u0275fac=function(t){return new(t||e)};static \u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function ct(){}function rn(e){let o=e===void 0?{}:e;return e&&(Array.isArray(e)?o=e.slice():typeof e=="object"&&(o=l({},e))),o}var be=(()=>{class e{_injector=c(ie);_config=c(x);_actionHandlerFactory=c(nn);_actions=c(_e);_actionResults=c(ht);_initialState=c(Se,{optional:!0});_actionRegistry=c(tt);_propGetter=c(Ht);_actionsSubscription=null;_ngxsUnhandledErrorHandler=null;_states=[];_statesByName={};_statePaths={};getRuntimeSelectorContext=H(()=>{let n=this,t=n._propGetter;function r(i){let a=n._statePaths[i];return a?t(a.split(".")):null}return{getStateGetter(i){let a=r(i);return a||((...u)=>(a||(a=r(i)),a?a(...u):void 0))},getSelectorOptions(i){let a=n._config.selectorOptions;return l(l({},a),i||{})}}});constructor(){c(m).onDestroy(()=>this._actionsSubscription?.unsubscribe())}add(n){let{newStates:t}=this.addToStatesMap(n);if(!t.length)return[];let r=$t(t),s=Yt(r),i=Xt(r),a=zt(t),u=[];for(let f of s){let h=a[f],P=i[f],Z=h[v];this.addRuntimeInfoToMeta(Z,P);let W={name:f,path:P,isInitialised:!1,actions:Z.actions,instance:c(h),defaults:rn(Z.defaults)};this.hasBeenMountedAndBootstrapped(f,P)||u.push(W),this._states.push(W),this.hydrateActionMetasMap(W)}return u}addAndReturnDefaults(n){let t=n||[],r=this.add(t);return{defaults:r.reduce((i,a)=>me(i,a.path,a.defaults),{}),states:r}}connectActionHandlers(){this._actionsSubscription=this._actions.pipe(j(n=>n.status===y.Dispatched),D(n=>{let t=n.action;return this.invokeActions(t).pipe(E(()=>({action:t,status:y.Successful})),re({action:t,status:y.Canceled}),T(r=>{let s=this._ngxsUnhandledErrorHandler||=this._injector.get(Kt),i=xt(r,()=>s.handleError(r,{action:t}));return g({action:t,status:y.Errored,error:i})}))})).subscribe(n=>this._actionResults.next(n))}invokeActions(n){let t=O(n),r=[],s=!1,i=this._actionRegistry.get(t);if(i)for(let a of i){let u;try{u=a(n)}catch(f){u=new I(h=>h.error(f))}r.push(u),s=!0}return r.length||r.push(g(void 0)),ne(r)}addToStatesMap(n){let t=[],r=this._statesByName;for(let s of n){let i=C(s).name;!r[i]&&(t.push(s),r[i]=s)}return{newStates:t}}addRuntimeInfoToMeta(n,t){this._statePaths[n.name]=t,n.path=t}hasBeenMountedAndBootstrapped(n,t){let r=X(this._initialState,t)!==void 0;return this._statesByName[n]&&r}hydrateActionMetasMap({path:n,actions:t,instance:r}){for(let s of Object.keys(t)){let i=t[s].map(a=>{let u=(f,h)=>r[a.fn](f,h);return this._actionHandlerFactory.createActionHandler(n,u,a.options)});for(let a of i)this._actionRegistry.register(s,a)}}static \u0275fac=function(t){return new(t||e)};static \u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),K=(()=>{class e{_stateStream=c($);_internalStateOperations=c(F);_config=c(x);_internalExecutionStrategy=c(gt);_stateFactory=c(be);_selectableStateStream=this._stateStream.pipe(Y(this._internalExecutionStrategy),w({bufferSize:1,refCount:!0}));constructor(){this.initStateStream()}dispatch(n){return this._internalStateOperations.getRootStateOperations().dispatch(n)}select(n){let t=this.getStoreBoundSelectorFn(n);return this._selectableStateStream.pipe(E(t),T(r=>{if(this._config.selectorOptions.suppressErrors&&r instanceof TypeError)return g(void 0);throw r}),Ae(),Y(this._internalExecutionStrategy))}selectOnce(n){return this.select(n).pipe(oe(1))}selectSnapshot(n){return this.getStoreBoundSelectorFn(n)(this._stateStream.getValue())}selectSignal(n){let t=this.getStoreBoundSelectorFn(n);return Xe(()=>t(this._stateStream.state()))}subscribe(n){return this._selectableStateStream.pipe(Y(this._internalExecutionStrategy)).subscribe(n)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(n){this._internalStateOperations.getRootStateOperations().setState(n)}getStoreBoundSelectorFn(n){let t=mt(n),r=this._stateFactory.getRuntimeSelectorContext();return t(r)}initStateStream(){let n=c(Se),t=this._stateStream.value;(!t||Object.keys(t).length===0)&&this._stateStream.next(n)}static \u0275fac=function(t){return new(t||e)};static \u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),on=new p("");var sn=(()=>{class e{static store=null;static config=null;constructor(n,t){e.store=n,e.config=t,c(m).onDestroy(()=>{e.store=null,e.config=null})}static \u0275fac=function(t){return new(t||e)(N(K),N(x))};static \u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),bt=(()=>{class e{_store=c(K);_internalStateOperations=c(F);_stateContextFactory=c(Mt);_appBootstrappedState=c(ye);_initStateHasBeenDispatched;ngxsBootstrap(n,t){this._internalStateOperations.getRootStateOperations().dispatch(n).pipe(D(()=>t?(this._invokeInitOnStates(t.states),this._appBootstrappedState):J)).subscribe(r=>{r&&this._invokeBootstrapOnStates(t.states)})}_invokeInitOnStates(n){for(let t of n){let r=t.instance;if(r.ngxsOnChanges){let s;this._store.select(i=>X(i,t.path)).pipe(we(void 0),Te(1)).subscribe(i=>{let a=new Me(s,i,!t.isInitialised);s=i,r.ngxsOnChanges(a)})}r.ngxsOnInit&&r.ngxsOnInit(this._getStateContext(t)),t.isInitialised=!0}}_invokeBootstrapOnStates(n){for(let t of n){let r=t.instance;r.ngxsAfterBootstrap&&r.ngxsAfterBootstrap(this._getStateContext(t))}}_getStateContext(n){return this._stateContextFactory.createStateContext(n.path)}static \u0275fac=function(t){return new(t||e)};static \u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function an(){Rt(),(c(on,{optional:!0})||[]).forEach(i=>i());let o=c(be),n=c(F);c(K),c(sn);let t=c(yt,{optional:!0})||[],r=c(bt),s=o.addAndReturnDefaults(t);n.setStateToTheCurrentWithNew(s),o.connectActionHandlers(),r.ngxsBootstrap(new nt,s)}function cn(){c(K);let e=c(F),o=c(be),n=c(jt,{optional:!0})||[],t=c(bt),r=n.reduce((i,a)=>i.concat(a),[]),s=o.addAndReturnDefaults(r);s.states.length&&(e.setStateToTheCurrentWithNew(s),t.ngxsBootstrap(new rt(s.defaults),s))}var ut=new p(""),lt=new p(""),un=[{provide:ut,useFactory:an},B(()=>c(ut))],rr=[{provide:lt,useFactory:cn},B(()=>c(lt))];function ln(e,o){return[...e,{provide:yt,useValue:e},{provide:Ge,useFactory:()=>{let n=c(ye);return()=>n.bootstrap()},multi:!0},{provide:vt,useValue:o}]}function or(e,o){return(n,t,r)=>{let s=pe(n.constructor),i=Array.isArray(e)?e:[e];for(let a of i){let u=a.type;s.actions[u]||(s.actions[u]=[]),s.actions[u].push({fn:t,options:o||{},type:u})}}}function sr(e){return o=>{let n=o,t=Object.getPrototypeOf(n),r=pe(n),s=l(l({},t[fe]||{}),e);dn(r,t,s),n[fe]=s}}function dn(e,o,n){let{name:t,defaults:r,children:s}=n,i=typeof t=="string"?t:t?.getName?.()||null;if(L(o,v)){let a=o[v]||{};e.actions=l(l({},e.actions),a.actions)}e.name=i,e.defaults=r,e.children=s}var dt="NGXS_SELECTOR_OPTIONS_META",ft={getOptions:e=>e?.[dt]||{},defineOptions:(e,o)=>{e&&(e[dt]=o)}};function fn(e,o){let n=he(e);n.originalFn=e;let t=()=>({});o&&(n.containerClass=o.containerClass,n.selectorName=o.selectorName||null,t=o.getSelectorOptions||t);let r=l({},n);return n.getSelectorOptions=()=>pn(r,t()),n}function pn(e,o){return l(l(l(l({},ft.getOptions(e.containerClass)||{}),ft.getOptions(e.originalFn)||{}),e.getSelectorOptions()||{}),o)}function hn(e,o,n){let t=Bt(o,n),r=fn(o,n);return r.makeRootSelector=kt(r,e,t),t}function ir(e){return(o,n,t)=>{t||=Object.getOwnPropertyDescriptor(o,n);let r=t?.value,s=hn(e,r,{containerClass:o,selectorName:n.toString(),getSelectorOptions(){return{}}});return{configurable:!0,get(){return s},originalFn:r}}}function ar(e=[],...o){let n=[],t={};return o.length>0&&(gn(o[0])?n.push(...o):(t=o[0],n.push(...o.slice(1)))),R([...ln(e,t),un,n])}function gn(e){return!!e.\u0275providers}function cr(e){return R([ot(e)?{provide:z,useClass:e,multi:!0}:{provide:z,useValue:e,multi:!0},B(()=>c(pt))])}var ur=new p("",{providedIn:"root",factory:()=>{let e=new Set;return c(Le).onDestroy(()=>e.clear()),e}});var pr=(()=>{let o=class o{};o.type="[compare] Get";let e=o;return e})(),hr=(()=>{let o=class o{constructor(t){this.payload=t}};o.type="[compare] Add";let e=o;return e})(),gr=(()=>{let o=class o{constructor(t){this.id=t}};o.type="[compare] Delete";let e=o;return e})();var yr=(()=>{let o=class o{constructor(t){this.payload=t}};o.type="[wishlist] Add";let e=o;return e})(),vr=(()=>{let o=class o{};o.type="[wishlist] Get";let e=o;return e})(),mr=(()=>{let o=class o{constructor(t){this.id=t}};o.type="[wishlist] Delete";let e=o;return e})();export{fe as a,L as b,le as c,nt as d,rt as e,Pn as f,me as g,X as h,K as i,or as j,sr as k,ir as l,ar as m,cr as n,In as o,An as p,Dn as q,pr as r,hr as s,gr as t,yr as u,vr as v,mr as w};
